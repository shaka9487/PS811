---
title: 'Exercise 5: Base R vs. Tidyverse'
author: "Dillon Laaker"
date: "10/15/2020"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```


# Base R tasks

1. Download the food_coded.csv file

2. Load the CSV file into your R environment.

    Open the `codebook_food.docx` file for guidance.
```{r}
cf <- read.csv("food_coded.csv")
cf
```


3. Extract the first 95 rows.
```{r}
cfsn <- cf[c(1:95), ]
cfsn
```


4. Look at the following variables using both name and column index/number.

    * GPA
    * calories_chicken
    * drink
    * fav_cuisine
    * father_profession
    * mother_profession
```{r}
cfsn_index <- cf[ , c("GPA", "calories_chicken", "drink", "fav_cuisine", "father_profession", "mother_profession")]
cfsn_index
```

5. Create a new variable for how healthy each person feels but convert the scale from 1 to 10 to 1 to 100.
```{r}
library(scales)
cfsn$newhealthy <- rescale(cfsn$healthy_feeling, to = c(1, 100))
cfsn
```


6. Filter to students who are female and have GPAs that are above 3.0.
```{r}
femalefilter <- cf[cf$GPA > 3.0, ]
femalefilter <- femalefilter[femalefilter$Gender == "1", ]
head(femalefilter)

```
```{r}
nrow(femalefilter)
```



7. Find the mean and standard deviation for the following variables, and summarize them in a data frame.

    * chicken_calories
    * tortilla_calories
    * turkey_calories
    * waffle_calories
```{r}
sum_cf <- data.frame(avg.chicken_calories = mean(cf$calories_chicken, na.rm = TRUE),
                     stdev.chicken_calories = sd(cf$calories_chicken, na.rm = TRUE),
                     avg.tortilla_calories = mean(cf$tortilla_calories, na.rm = TRUE),
                     stdev.tortilla_calories = sd(cf$tortilla_calories, na.rm = TRUE),
                     avg.turkey_calories = mean(cf$turkey_calories, na.rm = TRUE),
                     stdev.turkey_calories = sd(cf$turkey_calories, na.rm = TRUE),
                     avg.waffle_calories = mean(cf$waffle_calories, na.rm = TRUE),
                     stdev.waffle_calories = sd(cf$waffle_calories, na.rm = TRUE))

aggregate(formula = c(calories_chicken, tortilla_calories, turkey_calories, waffle_calories)~ 1,
          data = cf,
          FUN = function(x) c(mean = mean(x), sd = sd(x)))

sum_cf

```

    
8. Summarize GPA and weight within the gender and cuisine variables.
```{r}
cf %>% 
 group_by(Gender, weight) %>% 
 summarize(g = GPA,
           w = weight) %>% 
 ungroup()


                 


```

# Tidyverse tasks

1. Download the facebook-fact-check.csv

2. Load the CSV file into your R environment.

```{r}
ffc <- read.csv("facebook-fact-check.csv")
ffc
```


3. Extract the last 500 rows.

    Hint: Check out the [top_n() page](https://rdrr.io/github/YTLogos/dplyr/man/top_n.html) to figure out how to extract the last 500 rows instead of the first 500 rows.
```{r}
last_500row = tail(ffc, n=500)
print(last_500row)
```

    
4. Look at the even-numbered column indices only. Identify them by name.
```{r}
library(dplyr)
ffc
nrow(ffc)
row_odd <- seq_len(nrow(ffc)) %% 2
ffc_row_even <- ffc[row_odd == 0, ]
ffc_row_even
```


5. Using `mutate`, create a new variable called `post_type_coded` that renames each post type to the following:

    * link = 1
    * photo = 2
    * text = 3
    * video = 4
    
    Hint: look up case_when within tidyverse. You can also use if_else
```{r}
ffc %>% 
    mutate(post_type_coded = case_when(Post.Type == 'link' ~ 1,
                                       Post.Type == 'photo' ~ 2,
                                       Post.Type == 'text' ~ 3,
                                       Post.Type == 'video' ~ 4))
```

    
6. Arrange page names in reverse order.

```{r}
ffc %>% arrange(desc(Page))
```

    
7. Find the mean and standard deviation for the following variables, and summarize them.

    * share_count
    * reaction_count
    * comment_count
```{r}
ffc %>% 
 summarize(avg.share_count = mean(share_count, na.rm=TRUE))

ffc %>% 
 summarize(avg.share_count = mean(share_count, na.rm = TRUE),
           stdev.share_count = sd(share_count, na.rm = TRUE),
           avg.reaction_count = mean(reaction_count, na.rm = TRUE),
           stdev.reaction_count = sd(reaction_count, na.rm = TRUE),
           avg.comment_count = mean(comment_count, na.rm = TRUE),
           stdev.comment_count = sd(comment_count, na.rm = TRUE))
```


8. Summarize the mean and standard deviations in Question 7 with the "mainstream" values in the `category` variable.
```{r}
ffc %>% 
 group_by(Category) %>% 
 summarize(avg.share_count = mean(share_count, na.rm = TRUE),
           stdev.share_count = sd(share_count, na.rm = TRUE),
           avg.reaction_count = mean(reaction_count, na.rm = TRUE),
           stdev.reaction_count = sd(reaction_count, na.rm = TRUE),
           avg.comment_count = mean(comment_count, na.rm = TRUE),
           stdev.comment_count = sd(comment_count, na.rm = TRUE))
```
If we use mainstream value to calculate mean and standard deviations in Q7, the answers will as follow: avg.share_count = 160.6568, stdev.share_count= 939.8083, avg.reaction_count = 694.3712, stdev.reaction_count= 1863.640, avg.comment_count = 207.2218, stdev.comment_count= 346.0285.

# Submit

Email me (laaker@wisc.edu) the link to your `ps811-exercises` repository when you are done.